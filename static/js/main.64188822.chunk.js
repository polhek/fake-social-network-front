(this["webpackJsonpfacebook-front"]=this["webpackJsonpfacebook-front"]||[]).push([[0],{102:function(e,t,r){"use strict";r.r(t);var n=r(0),s=r(20),c=r.n(s),a=(r(48),r(23)),o=function(){return Object(a.b)()},i=a.c,l=r(5),u=r(2),d=r.n(u),j=r(10),b=r(4),f=r(15),h=r(3),x=r.n(h),m=Object(f.b)("user/login",function(){var e=Object(b.a)(d.a.mark((function e(t,r){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.post("https://warm-falls-67590.herokuapp.com/api/user/oauth/facebook",{access_token:t});case 3:if(200!==(n=e.sent).status){e.next=9;break}return localStorage.setItem("token",n.data.token),e.abrupt("return",Object(j.a)(Object(j.a)({},n.data),{},{loggedIn:!0,user:n.data.user}));case 9:return e.abrupt("return",r.rejectWithValue(n.data));case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(0),console.log("Error",e.t0.response.data),e.abrupt("return",r.rejectWithValue(e.t0.response.data));case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,r){return e.apply(this,arguments)}}()),p=Object(f.b)("user/update",function(){var e=Object(b.a)(d.a.mark((function e(t,r){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("https://warm-falls-67590.herokuapp.com/api/user/updateUser",{headers:{Authorization:t}});case 3:if(200!==(n=e.sent).status){e.next=8;break}return e.abrupt("return",Object(j.a)(Object(j.a)({},n.data),{},{user:n.data.user}));case 8:return e.abrupt("return",r.rejectWithValue(n.data));case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(0),console.log("Error",e.t0.response.data),e.abrupt("return",r.rejectWithValue(e.t0.response.data));case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}()),v={loggedIn:!1,user:void 0,isFetching:!1,isSuccess:!1,isError:!1},g=Object(f.c)({name:"user",initialState:v,reducers:{logOut:function(e){return localStorage.clear(),v}},extraReducers:function(e){e.addCase(m.fulfilled,(function(e,t){var r=t.payload;return e.user=r.user,e.loggedIn=r.loggedIn,e.isFetching=!1,e.isSuccess=!0,e})),e.addCase(m.rejected,(function(e,t){t.payload;e.isFetching=!1,e.isError=!0})),e.addCase(m.pending,(function(e){e.isFetching=!0})),e.addCase(p.fulfilled,(function(e,t){var r=t.payload;e.user=r.user}))}}),O=g.actions.logOut,w=g.reducer,N=r(18),y=r(1),k=function(e){var t=o(),r=i((function(e){return e.user.loggedIn})),n=i((function(e){return e.user.user}));return Object(y.jsxs)("header",{className:"flex flex-row justify-between items-center px-7 py-3 bg-gray-800",children:[Object(y.jsx)(N.b,{to:"/odinbook",children:Object(y.jsxs)("h1",{className:"font-bold text-4xl",children:["The ",Object(y.jsx)("span",{className:"text-red-600",children:"Odin"}),"book"]})}),Object(y.jsxs)("div",{className:"flex items-center justify-center space-x-5",children:[!r&&Object(y.jsx)("h2",{className:"font-bold text-xl text-red-600 ",children:"No user is logged in!"}),r&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(N.b,{to:"/profile",children:Object(y.jsx)("span",{className:"font-semibold text-xl px-4 py-2 hov border-2 hover:bg-red-500 transform hover:scale-105 border-red-500 ",children:"Profile"})}),Object(y.jsxs)("div",{className:"flex items-center",children:[Object(y.jsx)("img",{className:"inline object-cover w-12 h-12 mr-2 rounded-full",src:null===n||void 0===n?void 0:n.profile_img_url,alt:"avatar"}),Object(y.jsx)("h2",{className:"font-bold text-xl ",children:"".concat(null===n||void 0===n?void 0:n.first_name," ").concat(null===n||void 0===n?void 0:n.last_name)})]}),Object(y.jsxs)("button",{onClick:function(){t(O())},className:"bg-red-600 hover:bg-red-700 p-1 rounded flex items-center justify-center ml-2",children:[Object(y.jsx)(l.e,{className:"text-white h-5 w-5 mr-2"}),Object(y.jsx)("span",{children:"Log out"})]})]})]})]})},_=r(42),I=r.n(_),S=r(8),F=function(e){var t=o(),r=i((function(e){return e.user.loggedIn})),n=function(){var e=Object(b.a)(d.a.mark((function e(r){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.accessToken,localStorage.setItem("access_token",n),t(m(n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r?Object(y.jsx)(S.a,{to:"/odinbook"}):Object(y.jsx)("div",{className:"flex justify-center ",children:Object(y.jsxs)("div",{className:"bg-gray-800 mt-32 p-32 flex justify-center flex-col items-center text-lg rounded-xl shadow",children:[Object(y.jsx)("p",{children:"To login to the Odinbook, click the button bellow."}),Object(y.jsx)(I.a,{appId:"465879341344663",autoLoad:!1,fields:"name,email,picture",callback:n,cssClass:"bg-blue-600 rounded p-3 hover:bg-blue-800 mt-4 "})]})})},C=function(e){var t=e.secondUser_id,r=(e.loggedUser_id,o()),n=function(){var e=Object(b.a)(d.a.mark((function e(){var n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n=localStorage.getItem("token"))){e.next=8;break}return e.next=5,x.a.post("/api/user/".concat(null===t||void 0===t?void 0:t.toString(),"/send-request"),null,{headers:{Authorization:n}});case 5:s=e.sent,r(p(n)),console.log(s);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.response);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("button",{onClick:n,className:"bg-green-600 hover:bg-green-700 p-1 rounded flex items-center justify-center ml-2",children:[Object(y.jsx)(l.f,{className:"text-white h-5 w-5"}),Object(y.jsx)("span",{children:"Send friend request"})]})})},U=function(e){var t=e.secondUser_id,r=o(),n=i((function(e){return e.user.loggedIn})),s=function(){var e=Object(b.a)(d.a.mark((function e(){var s,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(s=localStorage.getItem("token"))||!n){e.next=8;break}return e.next=5,x.a.delete("/api/user/".concat(t,"/unsend-friend"),{headers:{Authorization:s}});case 5:c=e.sent,r(p(s)),console.log("cancel",c);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.response);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("button",{onClick:s,className:"bg-red-600 hover:bg-red-700 p-1 rounded flex items-center justify-center ml-2",children:[Object(y.jsx)(l.j,{className:"text-white h-5 w-5"}),Object(y.jsx)("span",{children:"Unsend Request"})]})})},A=function(e){var t=e.secondUser_id,r=o(),n=i((function(e){return e.user.loggedIn})),s=function(){var e=Object(b.a)(d.a.mark((function e(){var s,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(s=localStorage.getItem("token"))||!n){e.next=8;break}return e.next=5,x.a.delete("/api/user/".concat(t,"/remove-friend"),{headers:{Authorization:s}});case 5:c=e.sent,r(p(s)),console.log("remove",c);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.response);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("button",{onClick:s,className:"bg-red-600 hover:bg-red-700 p-1 rounded flex items-center justify-center ml-2",children:[Object(y.jsx)(l.i,{className:"text-white h-5 w-5"}),Object(y.jsx)("span",{children:"Remove friend"})]})})},E=function(e){var t=e.secondUser_id,r=o(),n=i((function(e){return e.user.loggedIn})),s=function(){var e=Object(b.a)(d.a.mark((function e(){var s,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(s=localStorage.getItem("token"))||!n){e.next=8;break}return e.next=5,x.a.delete("/api/user/".concat(t,"/cancel-friend"),{headers:{Authorization:s}});case 5:c=e.sent,console.log("cancel",c),r(p(s));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.response);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=Object(b.a)(d.a.mark((function e(){var s,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(s=localStorage.getItem("token"))||!n){e.next=8;break}return e.next=5,x.a.put("/api/user/".concat(t,"/accept-friend"),null,{headers:{Authorization:s}});case 5:c=e.sent,r(p(s)),console.log("cancel",c);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.response);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("button",{onClick:c,className:"bg-blue-600 hover:bg-blue-700 p-1 rounded flex items-center justify-center ml-2",children:[Object(y.jsx)(l.b,{className:"text-white h-5 w-5"}),Object(y.jsx)("span",{children:"Accept"})]}),Object(y.jsxs)("button",{onClick:s,className:"bg-red-600 hover:bg-red-700 p-1 rounded flex items-center justify-center ml-2",children:[Object(y.jsx)(l.i,{className:"text-white h-5 w-5"}),Object(y.jsx)("span",{children:"Cancel"})]})]})},q=function(e){var t=e.user,r=i((function(e){return e.user.user})),n=null===r||void 0===r?void 0:r._id;return Object(y.jsxs)("div",{className:"bg-gray-900 rounded flex justify-between mt-2 p-2",children:[Object(y.jsxs)("div",{className:"flex items-center",children:[Object(y.jsx)("img",{className:"inline object-cover w-8 h-8 rounded-full mr-2",src:null===t||void 0===t?void 0:t.profile_img_url,alt:"avatar"}),Object(y.jsx)("p",{className:"text-base",children:"".concat(null===t||void 0===t?void 0:t.first_name," ").concat(null===t||void 0===t?void 0:t.last_name," ")})]}),Object(y.jsxs)("div",{children:[(null===t||void 0===t?void 0:t.friends.includes(n))&&Object(y.jsx)(A,{secondUser_id:null===t||void 0===t?void 0:t._id}),!(null===t||void 0===t?void 0:t.friend_requests.includes(n))&&!(null===t||void 0===t?void 0:t.friend_send.includes(n))&&!(null===t||void 0===t?void 0:t.friends.includes(n))&&Object(y.jsx)(C,{secondUser_id:null===t||void 0===t?void 0:t._id,loggedUser_id:null===r||void 0===r?void 0:r._id}),(null===t||void 0===t?void 0:t.friend_send.includes(n))&&Object(y.jsx)(E,{secondUser_id:null===t||void 0===t?void 0:t._id}),(null===t||void 0===t?void 0:t.friend_requests.includes(n))&&Object(y.jsx)(U,{secondUser_id:null===t||void 0===t?void 0:t._id})]})]})},z=Object(f.b)("all/users",function(){var e=Object(b.a)(d.a.mark((function e(t,r){var n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("https://warm-falls-67590.herokuapp.com/api/user/allUsers",{headers:{Authorization:t}});case 3:if(200!==(n=e.sent).status){e.next=9;break}return s=n.data.allUsers,e.abrupt("return",Object(j.a)(Object(j.a)({},n.data),{},{allUsers:s}));case 9:return e.abrupt("return",r.rejectWithValue(n.data));case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(0),console.log("Error",e.t0.response.data),e.abrupt("return",r.rejectWithValue(e.t0.response.data));case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,r){return e.apply(this,arguments)}}()),P={allUsers:void 0,isFetching:!1,isSuccess:!1,isError:!1},T=Object(f.c)({name:"allUsers",initialState:P,reducers:{},extraReducers:function(e){e.addCase(z.fulfilled,(function(e,t){var r=t.payload;return e.allUsers=r.allUsers,e.isFetching=!1,e.isSuccess=!0,e})),e.addCase(z.rejected,(function(e,t){t.payload;e.isFetching=!1,e.isError=!0})),e.addCase(z.pending,(function(e){e.isFetching=!0}))}}).reducer,D=Object(f.b)("all/posts",function(){var e=Object(b.a)(d.a.mark((function e(t,r){var n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("https://warm-falls-67590.herokuapp.com/api/posts/all",{headers:{Authorization:t}});case 3:if(200!==(n=e.sent).status){e.next=9;break}return s=n.data.posts,e.abrupt("return",Object(j.a)(Object(j.a)({},n.data),{},{posts:s}));case 9:return e.abrupt("return",r.rejectWithValue(n.data));case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(0),console.log("Error",e.t0.response.data),e.abrupt("return",r.rejectWithValue(e.t0.response.data));case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,r){return e.apply(this,arguments)}}()),R={allPosts:void 0,isFetching:!1,isSuccess:!1,isError:!1},W=Object(f.c)({name:"allPosts",initialState:R,reducers:{},extraReducers:function(e){e.addCase(D.fulfilled,(function(e,t){var r=t.payload;return e.allPosts=r.posts,e.isFetching=!1,e.isSuccess=!0,e})),e.addCase(D.rejected,(function(e,t){t.payload;e.isFetching=!1,e.isError=!0})),e.addCase(D.pending,(function(e){e.isFetching=!0}))}}).reducer,V=r(17),B=r.n(V),M=function(e){var t=o(),r=i((function(e){return e.user.user})),s=i((function(e){return e.user.loggedIn})),c=i((function(e){return e.allUsers.allUsers})),a=localStorage.getItem("token"),l=i((function(e){return e.allUsers.isFetching}));return Object(n.useEffect)((function(){s&&a&&(t(z(a)),t(D(a)))}),[r]),Object(y.jsxs)("div",{className:"bg-gray-800 bg-opacity-90 m-2 rounded h-2/5 p-2 text-white shadow overflow-auto",children:[Object(y.jsx)("h3",{className:"font-bold mb-1 text-lg ",children:"All users:"}),l&&Object(y.jsx)("div",{className:"flex justify-center",children:Object(y.jsx)(B.a,{type:"ThreeDots",color:"#00BFFF",height:80,width:80})}),!l&&c&&c.map((function(e){return Object(y.jsx)(q,{user:e},e._id)}))]})},H=function(e){var t=e.friend;return Object(y.jsxs)("div",{className:"bg-gray-900 rounded flex justify-between mt-2 p-2",children:[Object(y.jsxs)("div",{className:"flex items-center",children:[Object(y.jsx)("img",{className:"inline object-cover w-8 h-8 rounded-full mr-2",src:null===t||void 0===t?void 0:t.profile_img_url,alt:"avatar"}),Object(y.jsx)("p",{className:"text-base",children:"".concat(null===t||void 0===t?void 0:t.first_name," ").concat(null===t||void 0===t?void 0:t.last_name," ")})]}),Object(y.jsx)("div",{children:Object(y.jsx)(A,{secondUser_id:null===t||void 0===t?void 0:t._id})})]})},L=function(e){var t=i((function(e){var t;return null===(t=e.user.user)||void 0===t?void 0:t.friends})),r=i((function(e){return e.user.isFetching}));return Object(y.jsxs)("div",{className:"bg-gray-800 bg-opacity-90 m-2 rounded h-2/5 p-2 text-white shadow overflow-scroll",children:[Object(y.jsx)("h3",{className:"font-bold mb-1 text-lg ",children:"Friends:"}),r&&Object(y.jsx)("div",{className:"flex justify-center",children:Object(y.jsx)(B.a,{type:"ThreeDots",color:"#00BFFF",height:80,width:80})}),!r&&t&&t.map((function(e){return Object(y.jsx)(H,{friend:e},e._id)})),!(null===t||void 0===t?void 0:t.length)&&Object(y.jsx)("p",{className:"text-red-500",children:"You have no friends!"})]})},Y=r(12),J=r(19),$=function(e){var t=Object(n.useState)(""),r=Object(Y.a)(t,2),s=r[0],c=r[1],a=localStorage.getItem("token"),u=Object(n.useState)(null),j=Object(Y.a)(u,2),f=j[0],h=j[1],m=Object(n.useRef)(null),v=o(),g=function(){var e=Object(b.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!(a&&s.length>0)||f){e.next=8;break}return console.log("samo text"),e.next=6,x.a.post("api/posts/newPost",{text:s},{headers:{Authorization:a}});case 6:v(p(a)),c("");case 8:if(!(a&&f&&s.length>0)){e.next=19;break}return console.log("file"),(r=new FormData).append("text",s),r.append("file",f),e.next=15,x.a.post("api/posts/newPost",r,{headers:{"Content-Type":"multipart/form-data",Authorization:a}});case 15:c(""),h(null),m.current&&(m.current.value=""),v(p(a));case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),console.log(e.t0);case 24:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t){return e.apply(this,arguments)}}(),O=i((function(e){return e.user.user}));return Object(y.jsx)("div",{className:"bg-gray-800 m-2 rounded p-2 flex flex-col ",children:Object(y.jsxs)("form",{onSubmit:function(e){g(e)},children:[Object(y.jsxs)("div",{className:"flex",children:[Object(y.jsx)("img",{className:"inline object-cover w-9 h-9  mr-2 rounded-full",src:null===O||void 0===O?void 0:O.profile_img_url,alt:"avatar"}),Object(y.jsx)(J.a,{placeholder:"What are you thinking about, ".concat(null===O||void 0===O?void 0:O.first_name),className:"w-full bg-gray-500 rounded-2xl p-1",onChange:function(e){!function(e){c(e.target.value)}(e)},value:s,required:!0})]}),Object(y.jsxs)("div",{className:"pt-3 flex justify-between items-center",children:[Object(y.jsxs)("button",{type:"submit",className:"bg-green-700 p-2 flex rounded items-center justify-items-center",children:[Object(y.jsx)(l.f,{className:"h-5 w-5 mr-2"}),Object(y.jsx)("span",{children:"Send Post"})]}),Object(y.jsx)("div",{children:Object(y.jsx)("input",{type:"file",name:"file",id:"file",onChange:function(e){!function(e){e.target.files&&h(e.target.files[0])}(e)},ref:m})})]})]})})},G=function(e){var t=e.likes;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("button",{children:Object(y.jsx)(l.h,{className:"h-5 w-5 hover:text-blue-400"})}),Object(y.jsx)("div",{className:"bg-gray-700 rounded-full h-5 w-5 p-3 flex justify-center items-center",children:t.length})]})},K=function(e){var t=e.comments,r=e.showHide;return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)("button",{onClick:r,children:Object(y.jsxs)("p",{className:"text-gray-400 hover:text-gray-500",children:[t.length," comments"]})})})},Q=function(e){var t=e.postId,r=localStorage.getItem("token"),n=o(),s=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r){e.next=5;break}return e.next=4,x.a.put("/api/posts/".concat(t,"/like"),null,{headers:{Authorization:r}});case 4:n(D(r));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(y.jsxs)("button",{onClick:s,className:"flex items-center hover:bg-gray-700 hover:text-gray-500 px-20 py-2 rounded",children:[Object(y.jsx)(l.h,{className:"h-5 w-5"}),"like"]})},X=function(e){var t=e.showHide;return Object(y.jsxs)("button",{onClick:t,className:"flex items-center hover:bg-gray-700 hover:text-gray-500 px-20 py-2 rounded",children:[Object(y.jsx)(l.a,{className:"h-5 w-5"}),"comments"]})},Z=function(e){var t=e.postId,r=localStorage.getItem("token"),n=o(),s=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r){e.next=5;break}return e.next=4,x.a.delete("api/posts/".concat(t,"/remove"),{headers:{Authorization:r}});case 4:n(p(r));case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(y.jsxs)("button",{onClick:s,className:"flex items-center hover:bg-gray-700 hover:text-gray-500 px-20 py-3 rounded",children:[Object(y.jsx)(l.i,{className:"h-5 w-5"}),"delete"]})},ee=r(30),te=function(e){var t=ee.DateTime.now(),r=ee.DateTime.fromISO(e),n=t.diff(r,"minutes"),s=null===n||void 0===n?void 0:n.toObject();if(s){var c=s.minutes;if(void 0===c)return null;if(c<3)return"Now... ";if(c<60)return"".concat(Math.round(c),"m ");if(c>60){var a,o=null!==(a=n.shiftTo("hours").toObject().hours)&&void 0!==a?a:void 0;if(o){var i=Math.round(o);if(i<=24)return"".concat(i,"h");var l,u,d=n.shiftTo("days","hours").toObject(),j=null!==(l=d.days)&&void 0!==l?l:void 0,b=null!==(u=d.hours)&&void 0!==u?u:void 0;if(j&&b)return"".concat(j,"d").concat(Math.round(b),"h")}}}return null},re=function(e){var t=e.comment,r=e.postId,n=i((function(e){return e.user.user})),s=localStorage.getItem("token"),c=o(),a=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!s){e.next=5;break}return e.next=4,x.a.delete("api/post/".concat(r,"/comment/").concat(null===t||void 0===t?void 0:t._id,"/delete"),{headers:{Authorization:s}});case 4:c(p(s));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(y.jsxs)("div",{className:"flex items-center  my-4",children:[Object(y.jsx)("img",{className:"inline object-cover w-7 h-7  mr-2 rounded-full",src:null===t||void 0===t?void 0:t.user.profile_img_url,alt:"avatar"}),Object(y.jsxs)("div",{className:"relative",children:[Object(y.jsxs)("div",{className:"bg-gray-600 p-2 rounded-2xl px-5",children:[Object(y.jsx)("h5",{className:"font-semibold",children:"".concat(t.user.first_name," ").concat(t.user.last_name," ")}),Object(y.jsx)("p",{className:"text-sm",children:null===t||void 0===t?void 0:t.text})]}),Object(y.jsxs)("span",{className:"absolute right-0 flex items-center text-gray-400",children:[te(t.createdAt),Object(y.jsx)(l.c,{className:"h-4 w-4"})]})]}),(null===n||void 0===n?void 0:n._id)===t.user._id?Object(y.jsx)("button",{onClick:a,className:"text-white bg-red-700 hover:bg-red-800 p-1  m-2 transform hover:scale-125 transition-all  rounded-full",children:Object(y.jsx)(l.i,{className:"h-4 w-4 "})}):null]})},ne=function(e){var t=e.postId,r=Object(n.useState)(""),s=Object(Y.a)(r,2),c=s[0],a=s[1],l=i((function(e){return e.user.user})),u=o(),j=localStorage.getItem("token"),f=function(){var e=Object(b.a)(d.a.mark((function e(r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),e.prev=1,!(j&&c.length>0)){e.next=7;break}return e.next=5,x.a.post("api/post/".concat(t,"/new-comment"),{text:c},{headers:{Authorization:j}});case 5:u(p(j)),a("");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsx)("form",{onSubmit:function(e){return f(e)},children:Object(y.jsxs)("div",{className:"flex items-center ",children:[Object(y.jsx)("img",{className:"inline object-cover w-9 h-9  mr-2 rounded-full",src:null===l||void 0===l?void 0:l.profile_img_url,alt:"avatar"}),Object(y.jsx)(J.a,{placeholder:"Write a comment ...",className:"w-full bg-gray-500 rounded-2xl p-1",onChange:function(e){!function(e){a(e.target.value)}(e)},value:c,required:!0}),Object(y.jsx)("button",{type:"submit",className:"bg-blue-800 rounded hover:bg-blue-900 px-5",children:"Send"})]})})},se=function(e){var t=e.allComments,r=e.postId;return Object(y.jsxs)("div",{className:"flex flex-col border-t-2 border-red-gray-200 mt-2 p-3",children:[Object(y.jsx)(ne,{postId:r}),t&&t.map((function(e){return Object(y.jsx)(re,{comment:e,postId:r},e._id)}))]})},ce=r(22),ae=r.n(ce),oe=(r(101),function(e){var t=e.postId,r=e.userImg,s=e.closeModal,c=Object(n.useState)(""),a=Object(Y.a)(c,2),i=a[0],u=a[1],j=Object(n.useState)(!0),f=Object(Y.a)(j,2),h=f[0],m=f[1],v=localStorage.getItem("token"),g=o();Object(n.useEffect)((function(){O()}),[]);var O=function(){var e=Object(b.a)(d.a.mark((function e(){var r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!v){e.next=9;break}return e.next=4,x.a.get("api/posts/".concat(t),{headers:{Authorization:v}});case 4:r=e.sent,n=r.data.post.text,console.log(r.data.post),u(n),m(!1);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(b.a)(d.a.mark((function e(r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),e.prev=1,!v){e.next=7;break}return e.next=5,x.a.put("api/posts/".concat(t,"/update"),{text:i},{headers:{Authorization:v}});case 5:e.sent&&(s(),g(p(v)));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return h?Object(y.jsx)("div",{className:"bg-black h-full p-10 flex items-center justify-center ",children:Object(y.jsx)(B.a,{type:"ThreeDots",color:"#00BFFF",height:80,width:80})}):Object(y.jsx)("div",{className:"bg-gray-800 rounded-xl h-full p-10 flex flex-col text-white",children:Object(y.jsxs)("form",{onSubmit:w,className:"flex-col w-full",children:[Object(y.jsxs)("div",{className:"flex justify-between items-center m-3",children:[Object(y.jsx)("h3",{className:"text-xl font-bold",children:"Edit post:"}),Object(y.jsx)("button",{onClick:s,className:"p-1 bg-red-500 hover:bg-red-600 transform hover:scale-105 rounded-full",children:Object(y.jsx)(l.k,{className:"w-5 h-5"})})]}),Object(y.jsxs)("div",{className:"flex w-full",children:[Object(y.jsx)("img",{className:"inline object-cover w-9 h-9  mr-2 rounded-full",src:r,alt:"avatar"}),Object(y.jsx)(J.a,{placeholder:"Write a comment ...",className:"w-full bg-gray-500 rounded-2xl p-1",onChange:function(e){!function(e){u(e.target.value)}(e)},value:i,required:!0})]}),Object(y.jsx)("div",{className:"flex justify-end m-2",children:Object(y.jsxs)("button",{type:"submit",className:"bg-blue-700 hover:bg-blue-800 transform hover:scale-105 flex items-center justify-center rounded p-2",children:[Object(y.jsx)("p",{children:"Edit post"}),Object(y.jsx)(l.g,{className:"h-5 w-5"})]})})]})})});ae.a.setAppElement("#root");var ie={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",padding:0,width:"60%",height:"65%",borderRadius:"0.75rem"}},le=function(e){var t=e.post,r=Object(n.useState)(!1),s=Object(Y.a)(r,2),c=s[0],a=s[1],o=Object(n.useState)(!1),u=Object(Y.a)(o,2),d=u[0],j=u[1],b=(t.user.profile_img_url,i((function(e){return e.user.user}))),f=function(){a(!c)},h=function(){j(!1)};return Object(y.jsxs)("div",{className:"bg-gray-800 my-4 p-2 rounded",children:[Object(y.jsxs)("div",{className:"flex justify-between items-center",children:[Object(y.jsxs)("div",{className:"flex items-center",children:[Object(y.jsx)("img",{className:"inline object-cover w-9 h-9  mr-2 rounded-full",src:null===t||void 0===t?void 0:t.user.profile_img_url,alt:"avatar"}),Object(y.jsxs)("div",{children:[Object(y.jsx)("p",{className:"font-bold text-base",children:t.user.first_name}),Object(y.jsxs)("p",{className:"text-sm text-gray-100 flex items-center",children:[te(t.createdAt),Object(y.jsx)(l.c,{className:"h-4 w-4"})]})]})]}),Object(y.jsx)("div",{children:(null===b||void 0===b?void 0:b._id)===(null===t||void 0===t?void 0:t.user._id)?Object(y.jsxs)("button",{onClick:function(){j(!0)},className:"flex items-center font-semibold text-gray-400 hover:text-gray-500",children:["Edit",Object(y.jsx)(l.d,{className:"h-5 w-5"})]}):null})]}),Object(y.jsx)("div",{className:"mt-2 p-2 text-justify",children:t.text}),t.image_url&&Object(y.jsx)("div",{className:"flex justify-center",children:Object(y.jsx)("img",{className:"rounded-lg border-black border-2 h-96 w-96",src:t.image_url,alt:"post"})}),Object(y.jsxs)("div",{className:"flex justify-between items-center ",children:[Object(y.jsx)("div",{className:"mt-2 p-2 flex items-center ",children:Object(y.jsx)(G,{likes:t.likes})}),Object(y.jsx)(K,{showHide:f,comments:t.comments})]}),Object(y.jsxs)("div",{className:"flex justify-evenly p-2  text-gray-400 border-t-2 border-red-gray-200",children:[Object(y.jsx)(Q,{postId:t._id}),Object(y.jsx)(X,{showHide:f}),b&&b._id===t.user._id?Object(y.jsx)(Z,{postId:t._id}):null]}),c&&Object(y.jsx)(se,{postId:t._id,allComments:null===t||void 0===t?void 0:t.comments}),Object(y.jsx)(ae.a,{isOpen:d,onRequestClose:h,style:ie,contentLabel:"Example modal",children:Object(y.jsx)(oe,{postId:t._id,userImg:null===t||void 0===t?void 0:t.user.profile_img_url,closeModal:h})})]})},ue=function(e){var t=i((function(e){return e.allPosts.allPosts}));return i((function(e){return e.allPosts.isFetching}))?Object(y.jsx)("div",{className:"flex justify-center",children:Object(y.jsx)(B.a,{type:"ThreeDots",color:"#00BFFF",height:80,width:80})}):Object(y.jsx)(y.Fragment,{children:t&&t.map((function(e){return Object(y.jsx)(le,{post:e},e._id)}))})},de=function(e){return Object(y.jsxs)("div",{className:"overflow-scroll h-full",children:[Object(y.jsx)($,{}),Object(y.jsx)(ue,{})]})},je=function(e){var t=e.request;return console.log(t),Object(y.jsxs)("div",{className:"bg-gray-900 rounded flex justify-between mt-2 p-2",children:[Object(y.jsxs)("div",{className:"flex items-center",children:[Object(y.jsx)("img",{className:"inline object-cover w-8 h-8 rounded-full mr-2",src:null===t||void 0===t?void 0:t.profile_img_url,alt:"avatar"}),Object(y.jsx)("p",{className:"text-base",children:"".concat(null===t||void 0===t?void 0:t.first_name," ").concat(null===t||void 0===t?void 0:t.last_name," ")})]}),Object(y.jsx)("div",{children:Object(y.jsx)(E,{secondUser_id:null===t||void 0===t?void 0:t._id})})]})},be=function(e){var t=i((function(e){var t;return null===(t=e.user.user)||void 0===t?void 0:t.friend_requests})),r=i((function(e){return e.user.isFetching}));return Object(y.jsxs)("div",{className:"bg-gray-800 bg-opacity-90 m-2 rounded h-2/5 p-2 text-white shadow overflow-auto",children:[Object(y.jsx)("h3",{className:"font-bold mb-1 text-lg ",children:"Pending friend requests:"}),r&&Object(y.jsx)("div",{className:"flex justify-center",children:Object(y.jsx)(B.a,{type:"ThreeDots",color:"#00BFFF",height:80,width:80})}),!r&&t&&t.map((function(e){return Object(y.jsx)(je,{request:e},e._id)})),!r&&!(null===t||void 0===t?void 0:t.length)&&Object(y.jsx)("p",{className:"text-red-500",children:"You have no friends requests!"})]})},fe=function(e){var t=e.sendRequest;return Object(y.jsxs)("div",{className:"bg-gray-900 rounded flex justify-between mt-2 p-2",children:[Object(y.jsxs)("div",{className:"flex items-center",children:[Object(y.jsx)("img",{className:"inline object-cover w-8 h-8 rounded-full mr-2",src:null===t||void 0===t?void 0:t.profile_img_url,alt:"avatar"}),Object(y.jsx)("p",{className:"text-base",children:"".concat(null===t||void 0===t?void 0:t.first_name," ").concat(null===t||void 0===t?void 0:t.last_name," ")})]}),Object(y.jsx)("div",{children:Object(y.jsx)(U,{secondUser_id:null===t||void 0===t?void 0:t._id})})]})},he=function(e){var t=i((function(e){var t;return null===(t=e.user.user)||void 0===t?void 0:t.friend_send}));return Object(y.jsxs)("div",{className:"bg-gray-800 bg-opacity-90 m-2 rounded h-2/5 p-2 text-white shadow overflow-auto",children:[Object(y.jsx)("h3",{className:"font-bold mb-1 text-lg ",children:"Sent friend requests:"}),t&&t.map((function(e){return Object(y.jsx)(fe,{sendRequest:e},e._id)})),!(null===t||void 0===t?void 0:t.length)&&Object(y.jsx)("p",{className:"text-red-500",children:"You have no sent friend requests!"})]})},xe=function(e){return Object(y.jsxs)("div",{className:"w-full h-full flex  text-white",children:[Object(y.jsxs)("div",{className:" w-1/4",children:[Object(y.jsx)(M,{}),Object(y.jsx)(L,{})]}),Object(y.jsx)("div",{className:"w-2/4",children:Object(y.jsx)(de,{})}),Object(y.jsxs)("div",{className:"w-1/4",children:[Object(y.jsx)(be,{}),Object(y.jsx)(he,{})]})]})},me=r(43),pe=function(e){var t=e.component,r=e.loggedIn,n=Object(me.a)(e,["component","loggedIn"]);return Object(y.jsx)(S.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){return r?Object(y.jsx)(t,Object(j.a)({},e)):Object(y.jsx)(S.a,{to:{pathname:"/",state:{from:e.location}}})}}))},ve=function(e){var t=i((function(e){return e.user.user})),r=Object(n.useState)(""),s=Object(Y.a)(r,2),c=s[0],a=s[1],l=localStorage.getItem("token"),u=Object(n.useRef)(null),j=o(),f=function(){var e=Object(b.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!l){e.next=9;break}return(r=new FormData).append("file",c),console.log(r),e.next=7,x.a.post("api/user/updateProfilePicture",r,{headers:{"Content-Type":"multipart/form-data",Authorization:l}});case 7:u.current&&(u.current.value=""),j(p(l));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsx)("div",{className:"flex justify-center bg-gray-800 rounded",children:Object(y.jsxs)("div",{className:"flex flex-col items-center p-5",children:[Object(y.jsx)("img",{className:"inline object-cover w-40 h-40 mr-2 rounded-full border-4 border-black",src:null===t||void 0===t?void 0:t.profile_img_url,alt:"avatar"}),Object(y.jsx)("h2",{className:"font-bold text-3xl  ",children:"".concat(null===t||void 0===t?void 0:t.first_name," ").concat(null===t||void 0===t?void 0:t.last_name)}),Object(y.jsx)("form",{onSubmit:function(e){f(e)},children:Object(y.jsxs)("div",{className:"flex flex-col border-2 bg-gray-900 p-4 gap-3 rounded",children:[Object(y.jsxs)("div",{className:"flex justify-center flex-col items-center",children:[Object(y.jsx)("label",{className:"font-bold text-xl",children:"If you want to change profile picture click bellow"}),Object(y.jsx)("input",{type:"file",name:"file",onChange:function(e){!function(e){e.target.files&&(console.log(e.target.files),a(e.target.files[0]))}(e)},ref:u})]}),Object(y.jsx)("button",{type:"submit",className:"bg-green-500 rounded  ",children:"Upload file"})]})})]})})},ge=function(e){var t=i((function(e){return e.user.user}));return Object(y.jsxs)("div",{className:"flex items-center flex-col mt-5",children:[Object(y.jsx)("div",{className:"w-1/2",children:Object(y.jsx)(ve,{})}),t&&(null===t||void 0===t?void 0:t.posts.map((function(e){return console.log(e),Object(y.jsx)(le,{post:e},e._id)}))),!(null===t||void 0===t?void 0:t.posts.length)&&Object(y.jsx)("p",{children:"You have no posts!"})]})};ae.a.setAppElement("#root");var Oe=function(){var e=i((function(e){return e.user.loggedIn})),t=o();return Object(n.useEffect)((function(){var e=localStorage.getItem("access_token");e&&t(m(e))}),[]),Object(y.jsx)(N.a,{children:Object(y.jsxs)("div",{className:" h-full text-white bg-gray-700",children:[Object(y.jsx)(k,{}),Object(y.jsxs)(S.d,{children:[Object(y.jsx)(S.b,{exact:!0,path:"/",component:F}),Object(y.jsx)(pe,{exact:!0,component:xe,path:"/odinbook",loggedIn:e}),Object(y.jsx)(pe,{component:ge,path:"/profile",loggedIn:e})]})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var we=Object(f.a)({reducer:{user:w,allUsers:T,allPosts:W}});x.a.defaults.baseURL="https://warm-falls-67590.herokuapp.com/",c.a.render(Object(y.jsx)(a.a,{store:we,children:Object(y.jsx)(Oe,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},48:function(e,t,r){}},[[102,1,2]]]);
//# sourceMappingURL=main.64188822.chunk.js.map